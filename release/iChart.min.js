window.iChart=window.iChart||{},function(a){var b=.618,c={calculateFontSize:function(a){if(a&&""!=a)for(var b=a.split(" "),c=0;c<b.length;c++)if(b[c].indexOf("px")>0)return parseInt(b[c].substr(0,b[c].length-2));return 0},findMax:function(a,b,c){var d=this.getFields(b,"yField");return this.findMaxInAll(a,d,c)},findMaxInAll:function(a,b,c){for(var d=[],e=0;e<b.length;e++)d.push(this.max(a,b[e],c));return this.max(d,void 0,c)},max:function(a,b,c){var d=null;if(a&&a.length>0){d=void 0==b?a[0]:a[0][b];for(var e=1;e<a.length;e++){var f=void 0==b?a[e]:a[e][b];void 0!=c&&1==c?d>f&&(d=f):f>d&&(d=f)}}return d},getFields:function(a,b){var c=[];if(a&&a.length>0)for(var d=0;d<a.length;d++)c.push(a[d][b]);return c},getScale:function(a){var b=this.floor(a);return b>0?b.toString().length:0},getScales:function(a){var c,d=[0],e=10,f=this.getScale(a);if(1>=f){c=a>5?1:.5;for(var g=1;e>=g;g++)d.push(c*g)}else if(a>Math.pow(10,f)*b){c=Math.pow(10,f-1);for(var g=1;e>=g;g++)d.push(c*g)}else{c=Math.pow(10,f-1)/2;for(var h=a/c,g=1;h+2>=g;g++)d.push(c*g)}return d},calculateXAxisItemWidth:function(a,b,c){var d=0,e=300,f=c/a/(b+1);return d=f>1?e>f?this.floor(f):e:1},floor:function(a){var b=a.toString().split(".");return parseInt(b[0])}};a.Utils=c}(window.iChart),window.iChart=window.iChart||{},function(a){var b=5,c=10,d=100,e=2*b+c,f=function(a,b){this.canvas=a,this.context=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.parameters=b},g=f.prototype;g.initialize=function(){var a=["dataProvider","series"],c={animated:!0,showTooltip:!0,showLegend:!0,showGrid:!0,title:{label:"",color:"#000",font:"14px Segoe UI Light",top:b}};if(void 0==this.parameters||null==this.parameters)return console.error("Error: miss param "),!1;for(var f=0;f<a.length;f++)if(!this.parameters.hasOwnProperty(a[f]))return console.error("Error: miss param "+a[f]),!1;for(var g in c)if(this[g]=void 0==this.parameters[g]?c[g]:this.parameters[g],"title"==g)for(var h in c.title)this.title[h]=void 0==this.title[h]?c.title[h]:this.title[h];return this.width<d||this.height<e?(console.error("Canvas is too small for iChart(minWidth:"+d+", minHeight:"+e),!1):(this.headerHeight=0,this.legendHeight=2*b,this.origin={x:0,y:0},this.paddingRight=2*b,!0)},g.drawChart=function(){this.initialize()&&(this._drawTitle(),this._drawLegend(),this._draw(b),this._createTooltip())},g._drawTitle=function(){if(""!=this.title.label){var c=this.title.top;this.context.font=this.title.font,this.context.textAlign="center",this.context.fillStyle=this.title.color,this.context.fillText(this.title.label,this.width/2,c),this.headerHeight=c+a.Utils.calculateFontSize(this.context.font)/2+b}},g._drawLegend=function(){if(this.showLegend)for(var a=0;a<this.parameters.series;a++){this.parameters.series[a]}},g._draw=function(){console.error("BaseChart should not be initialized directly. Use sub classes(BarChart, LineChart etc) instead.")},g._createTooltip=function(){},g.getData=function(){return this.parameters.dataProvider},g.getOriginPoint=function(){return this.origin},g.getXAxisLength=function(){return this.xAxisLength},g.getYAxisLength=function(){return this.yAxisLength},g.getFooterHeight=function(){return this.legendHeight},g.getDefaultPadding=function(){return b},g.getPaddingRight=function(){return this.paddingRight},g.getSeries=function(){return this.parameters.series},g.getXFields=function(){return a.Utils.getFields(this.getSeries(),"xField")},g.getYFields=function(){return a.Utils.getFields(this.getSeries(),"yField")},g.getMaxScale=function(){var a=1;return this.yScales.length>0&&(a=this.yScales[this.yScales.length-1]),a},g.printLabel=function(a,b,c,d){this.context.font="4px Arial",this.context.textAlign=d,this.context.fillStyle="black",this.context.fillText(c,a,b)},g.drawRect=function(a,b,c,d,e,f){this.context.beginPath(),this.context.rect(a,b,c,d),this.context.fillStyle=e,this.context.fill(),this.context.lineWidth=1,this.context.strokeStyle=f,this.context.stroke()},a.BaseChart=f}(window.iChart),function(a){var b=6,c="gray",d=function(b,c){a.BaseChart.call(this,b,c)},e=d.prototype=Object.create(a.BaseChart.prototype);d.prototype.parent=a.BaseChart.prototype,e._draw=function(a){this._drawAxes(a),this._drawDataArea()},e._drawAxes=function(d){var e=d,f=this.headerHeight,g=this.getData(),h=this.parameters.series,i=a.Utils.findMax(g,h),j=a.Utils.getScales(i);this.yScales=j;var k=40,l=20;this.origin={x:d+k,y:this.height-this.getFooterHeight()-l};var m=e+k,n=this.width-this.getPaddingRight();this.yAxisLength=this.origin.y-f,this.xAxisLength=n-this.origin.x,this.context.strokeStyle=c,this.context.lineWidth="1",this.context.beginPath(),this.context.moveTo(m,f),this.context.lineTo(this.origin.x,this.origin.y),this.context.lineTo(n,this.origin.y),this.showGrid&&(this.context.lineTo(n,f),this.context.lineTo(m,f)),this.context.stroke();var o=void 0==this.parameters.yAxis?void 0:this.parameters.yAxis.labelFunction;if(j.length>1)for(var p=this.yAxisLength/(j.length-1),q=0;q<j.length;q++){var r=this.origin.y-p*q,s=void 0==o?j[q]:o.call(null,j[q]);this.context.beginPath(),this.context.lineWidth=q%2==0?"2":"1",this.context.strokeStyle="#e5e5e5",this.context.moveTo(this.origin.x,r),this.context.lineTo(this.origin.x-b,r),this.showGrid&&this.context.lineTo(n,r),this.context.stroke(),this.printLabel(e,r+4,s,"left")}},e.clearDataArea=function(a,b,c,d){this.context.clearRect(a,b,c,d)},e._drawDataArea=function(){console.error("AxesChart should not be initialized directly. Use sub classes(BarChart, LineChart etc) instead.")},a.AxesChart=d}(window.iChart),function(a){var b=function(b,c){a.AxesChart.call(this,b,c)},c=b.prototype=Object.create(a.AxesChart.prototype);b.prototype.parent=a.AxesChart.prototype,c._drawDataArea=function(){for(var b=this.getOriginPoint(),c=this.getData(),d=b.x,e=b.y,f=this.getSeries(),g=a.Utils.calculateXAxisItemWidth(c.length,f.length,this.getXAxisLength()-this.getPaddingRight()),h=d,i=e+15,j=d,k=f.length*g/2,l=this.getYAxisLength(),m=l/this.getMaxScale(),n=this.getXFields()[0],o=0;o<c.length;o++){j+=g,h=j+k-5,this.printLabel(h,i,c[o][n],"middle");for(var p=0;p<f.length;p++){var q=f[p].yField,r=c[o][q],s=r*m,t=f[p].fillColor,u=f[p].strokeColor,v=e-r*m;this.animated?this.animateBarDrawing(j,v,g,s,t,u):this.drawRect(j,v,g,s,t,u),j+=g}}},c.animateBarDrawing=function(b,c,d,e,f,g){function h(a,b,c,d,e,f,g,h){setTimeout(function(){a.clearDataArea(b,c,d,e),a.drawRect(b,c,d,e,f,g)},h)}for(var i,j=360,k=36,l=a.Utils.floor(j/k),m=0;l>m;m++)i=m/l*e,h(this,b,c+e-i,d,i,f,g,m*k);h(this,b,c,d,e,f,g,m*k)},a.BarChart=b}(window.iChart);