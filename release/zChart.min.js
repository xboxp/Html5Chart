window.zChart=window.zChart||{},function(a){var b=.618,c={calculateFontSize:function(a){if(a&&""!==a)for(var b=a.split(" "),c=0;c<b.length;c++)if(b[c].indexOf("px")>0)return parseInt(b[c].substr(0,b[c].length-2));return 0},findMax:function(a,b,c){var d=this.getFields(b,"yField");return this.findMaxInAll(a,d,c)},findMaxInAll:function(a,b,c){for(var d=[],e=0;e<b.length;e++)d.push(this.max(a,b[e],c));return this.max(d,void 0,c)},max:function(a,b,c){var d=null;if(a&&a.length>0){d=void 0===b?a[0]:a[0][b];for(var e=1;e<a.length;e++){var f=void 0===b?a[e]:a[e][b];void 0!==c&&c===!0?d>f&&(d=f):f>d&&(d=f)}}return d},getFields:function(a,b){var c=[];if(a&&a.length>0)for(var d=0;d<a.length;d++)c.push(a[d][b]);return c},getScale:function(a){var b=this.floor(a);return b>0?b.toString().length:0},getScales:function(a){var c,d=[0],e=10,f=this.getScale(a);if(1>=f){c=a>5?1:.5;for(var g=1;e>=g;g++)d.push(c*g)}else if(a>Math.pow(10,f)*b){c=Math.pow(10,f-1);for(var h=1;e>=h;h++)d.push(c*h)}else{c=Math.pow(10,f-1)/2;for(var i=a/c,j=1;i+2>=j;j++)d.push(c*j)}return d},calculateXAxisItemWidth:function(a,b,c){var d=0,e=300,f=e;return a>0&&(f=c/a/(b+1)),d=f>1?e>=f?this.floor(f):e:1},floor:function(a){var b=a.toString().split(".");return parseInt(b[0])},mouseIn:function(a,b,c,d,e,f){return a>c&&c+e>a&&b>d&&d+f>b?!0:!1},mouseInCircle:function(a,b,c,d,e){var f=Math.abs(a-c),g=Math.abs(b-d),h=Math.sqrt(f*f+g*g);return e>h}};a.Utils=c}(window.zChart),window.zChart=window.zChart||{},function(a){var b=5,c=13,d=100,e=6*b,f="14px Segoe UI Light",g="12px Segoe UI Light",h=30,i=10,j="10px Segoe UI Light",k=function(a,b){this.canvas=a,this.context=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this._parameters=b},l=k.prototype;l.initialize=function(){var a=["dataProvider","series"],c={animated:!0,showTooltip:!0,showLegend:!0,showGrid:!0,title:{label:"",color:"#000",font:f,top:b}};if(void 0===this._parameters||null===this._parameters)return console.error("Error: miss param "),!1;for(var g=0;g<a.length;g++)if(!this._parameters.hasOwnProperty(a[g]))return console.error("Error: miss param "+a[g]),!1;for(var h in c)if(this[h]=void 0===this._parameters[h]?c[h]:this._parameters[h],"title"==h)for(var i in c.title)this.title[i]=void 0===this.title[i]?c.title[i]:this.title[i];return this.width<d||this.height<e?(console.error("Canvas is too small for zChart(minWidth:"+d+", minHeight:"+e),!1):(this._headerHeight=0,this._footerHeight=2*b,this._paddingRight=2*b,this._paddingBottom=2*b,!0)},l.drawChart=function(){this.initialize()&&(this.drawTitle(),this.drawLegend(),this.createTooltip(),this.draw())},l.drawTitle=function(){if(""!==this.title.label){var c=this.title.top;this.drawLabel(this.width/2,c,this.title.label,"center",this.title.font),this._headerHeight=c+a.Utils.calculateFontSize(this.context.font)/2+b}},l.drawLegend=function(){var a=0,c=this.width/2,d=this.height-i-this._paddingBottom,e=this.getSeries();if(this.showLegend){this.setFooterHeight(i+2*this._paddingBottom);for(var f=0;f<e.length;f++){var g=e[f],j=g.label?g.label:g.yField;c+=a,a=h+2*b+this.calculateLabelWidth(j),this.drawRect(c,d,h,i,g.fillColor,g.strokeColor),this.drawLabel(c+h+b,d+i,j,"left")}}},l.setParameter=function(a){this._parameters=a},l.reload=function(){this.clearRect(0,0,this.width,this.height),this.drawChart()},l.clearRect=function(a,b,c,d){this.context.clearRect(a,b,c,d)},l.draw=function(){console.error("BaseChart should not be initialized directly. Use sub classes(BarChart, LineChart etc) instead.")},l.createTooltip=function(){void 0===this._tipCanvas&&(this._tipCanvas=document.createElement("canvas"),this._tipCanvas.width=100,this._tipCanvas.height=c,this._tipCanvas.style.position="absolute",this.canvas.nextSibling?this.canvas.parentNode.insertBefore(this._tipCanvas,this.canvas.nextSibling):this.canvas.parentNode.appendChild(this._tipCanvas))},l.getTooltip=function(){return this._tipCanvas},l.hideTooltip=function(){this._tipCanvas.style.left="-"+(this._tipCanvas.width+2e3)+"px"},l.customizeTooltip=function(a,b,c,d,e){a.clearRect(0,0,d,e),a.beginPath(),a.rect(0,0,d,e),a.fillStyle="white",a.fill(),a.lineWidth=1,a.strokeStyle="gray",a.stroke(),a.font=j,a.fillStyle="black",a.textAlign="left";for(var f=0;f<c.length;f++){var g=c[f].yField,h=void 0===c[f].label?g:c[f].label;a.fillText(this.tooltipLabelFunc(h,b[g],this.getYAxisLabelFunc()),2,this.getTooltipDefaultHeight()*(f+1))}},l.getMaxLabelWidth=function(b,c){for(var d=[],e=0;e<c.length;e++)d.push({width:this.calculateLabelWidth(this.tooltipLabelFunc(c[e].label,b,this.getYAxisLabelFunc()),j)});return a.Utils.max(d,"width")},l.tooltipLabelFunc=function(a,b,c){return c&&(b=c.call(null,b)),a+":"+b},l.getParam=function(){return this._parameters},l.getData=function(){return this._parameters.dataProvider},l.getSeries=function(){return this._parameters.series},l.getDefaultPadding=function(){return b},l.getPaddingRight=function(){return this._paddingRight},l.setHeaderHeight=function(a){this._headerHeight=a},l.getHeaderHeight=function(){return this._headerHeight},l.setFooterHeight=function(a){this._footerHeight=a},l.getFooterHeight=function(){return this._footerHeight},l.getTooltipDefaultHeight=function(){return c},l.getTooltipFont=function(){return j},l.calculateLabelWidth=function(a,b){return this.context.font=void 0===b?g:b,this.context.measureText(a).width},l.drawLabel=function(a,b,c,d,e){this.context.font=void 0===e?g:e,this.context.textAlign=d,this.context.fillStyle="black",this.context.fillText(c,a,b)},l.drawRect=function(a,b,c,d,e,f){this.context.beginPath(),this.context.rect(a,b,c,d),this.context.fillStyle=e?e:"#0099ff",e&&this.context.fill(),this.context.lineWidth=1,this.context.strokeStyle=f,this.context.stroke()},l.drawLines=function(a,b,c,d,e){this.context.strokeStyle=e,this.context.lineWidth=d,this.context.beginPath(),this.context.moveTo(a,b);for(var f=0;f<c.length;f++)this.context.lineTo(c[f].x,c[f].y);this.context.stroke()},l.mouseIn=function(b,c,d,e,f,g){return a.Utils.mouseIn(b,c,d,e,f,g)},a.BaseChart=k}(window.zChart),function(a){var b=6,c="gray",d=function(b,c){a.BaseChart.call(this,b,c),this._yLabelWidth=40,this._yLabelHeight=20},e=d.prototype=Object.create(a.BaseChart.prototype);e.draw=function(){this.drawAxes(),this.drawDataArea()},e.drawAxes=function(){this._origin={x:this.getDefaultPadding()+this._yLabelWidth,y:this.height-this.getFooterHeight()-this._yLabelHeight},this.setXAxisLength(this.width-this.getPaddingRight()-this._origin.x),this.setYAxisLength(this._origin.y-this.getHeaderHeight());var a=this.getDefaultPadding(),d=this._origin.x,e=this.getHeaderHeight(),f=this.getScales(),g=this.getXAxisLength(),h=this.getYAxisLength(),i=d+g,j=[];j.push({x:d,y:this._origin.y}),j.push({x:i,y:this._origin.y}),this.showGrid&&(j.push({x:i,y:e}),j.push({x:d,y:e})),this.drawLines(d,e,j,"1",c);var k=this.getYAxisLabelFunc();if(f.length>1)for(var l=h/(f.length-1),m=0;m<f.length;m++){var n=this._origin.y-l*m,o=void 0===k?f[m]:k.call(null,f[m]),p=m%2===0?"2":"1",q=[],r=this.calculateLabelWidth(o);q.push({x:this._origin.x-b,y:n}),this.showGrid&&q.push({x:i,y:n}),this.drawLines(this._origin.x,n,q,p,"#e5e5e5"),this.drawLabel(a+(this._yLabelWidth-(r+b)),n+4,o,"left")}},e.drawDataArea=function(){console.error("AxesChart should not be initialized directly. Use sub classes(BarChart, LineChart etc) instead.")},e.getOriginPoint=function(){return this._origin},e.setXAxisLength=function(a){this.xAxisLength=a},e.getXAxisLength=function(){return this.xAxisLength},e.setYAxisLength=function(a){this.yAxisLength=a},e.getYAxisLength=function(){return this.yAxisLength},e.getMax=function(){return a.Utils.findMax(this.getData(),this.getSeries())},e.getScales=function(){return a.Utils.getScales(this.getMax())},e.getMaxScale=function(){var a=1,b=this.getScales();return b.length>0&&(a=b[b.length-1]),a},e.getXFields=function(){return a.Utils.getFields(this.getSeries(),"xField")},e.getYFields=function(){return a.Utils.getFields(this.getSeries(),"yField")},e.getYAxisLabelFunc=function(){var a=this.getParam();return void 0===a.yAxis?void 0:a.yAxis.labelFunction},a.AxesChart=d}(window.zChart),function(a){var b=function(b,c){a.AxesChart.call(this,b,c)},c=b.prototype=Object.create(a.AxesChart.prototype);c.drawDataArea=function(){var a=this.getOriginPoint(),b=this.getData(),c=a.x,d=a.y,e=this.getSeries(),f=this.getBarWidth(b,e),g=c,h=d+15,i=c,j=e.length*f/2,k=this.getXAxisLength(),l=this.getYAxisLength(),m=l/this.getMaxScale(),n=this.getXFields()[0];this._dataArea=[];for(var o=0;o<b.length;o++){var p=b[o][n],q=this.calculateLabelWidth(p)>f?f:this.calculateLabelWidth(p);i+=f,g=i+j-q/2,this.drawLabel(g,h,p,"middle"),this._dataArea.push(i);for(var r=0;r<e.length;r++){var s=e[r].yField,t=b[o][s],u=t*m,v=e[r].fillColor,w=e[r].strokeColor,x=d-t*m;this.animated?this.animateBarDrawing(i,x,f,u,v,w):this.drawRect(i,x,f,u,v,w),i+=f}}if(this.showTooltip){var y=this,z=e.length,A=this.canvas.getBoundingClientRect(),B=this.getTooltip(),C=B.getContext("2d"),D=e.length*(this.getTooltipDefaultHeight()+2),E=this.getMaxLabelWidth(this.getMax(),e,this.getTooltipFont());this.canvas.onmousemove=function(c){var d=c.clientX-A.left,g=c.clientY-A.top,h=!1;if(y.mouseIn(d,g,a.x,a.y-l,k,l))for(var i=0;i<y._dataArea.length;i++)y.mouseIn(d,g,y._dataArea[i],a.y-l,z*f,l)&&(B.height=D,B.width=E+y.getDefaultPadding(),B.style.left=d+"px",B.style.top=g-D+"px",y.customizeTooltip(C,b[i],e,B.width,B.height),h=!0);h||y.hideTooltip()}}},c.animateBarDrawing=function(b,c,d,e,f,g){function h(a,b,c,d,e,f,g,h){setTimeout(function(){a.clearRect(b,c,d,e),a.drawRect(b,c,d,e,f,g)},h)}for(var i,j=360,k=36,l=a.Utils.floor(j/k),m=0;l>m;m++)i=m/l*e,h(this,b,c+e-i,d,i,f,g,m*k);h(this,b,c,d,e,f,g,m*k)},c.getBarWidth=function(b,c){return a.Utils.calculateXAxisItemWidth(b.length,c.length,this.getXAxisLength()-this.getPaddingRight())},a.BarChart=b}(window.zChart),function(a){var b=5,c=20,d=function(b,c){a.AxesChart.call(this,b,c)},e=d.prototype=Object.create(a.AxesChart.prototype);e.drawDataArea=function(){var a=this.getOriginPoint(),d=this.getData(),e=a.x,f=a.y,g=this.getSeries(),h=this.getLineInterval(d,g),i=e,j=f+15,k=this.getXAxisLength(),l=this.getYAxisLength(),m=l/this.getMaxScale(),n=this.getXFields()[0];this._dataPoints=[];for(var o=0;o<g.length;o++){var p=g[o].yField,q=g[o].fillColor,r=g[o].strokeColor,s=e,t=!0;this._dataPoints[o]=[];for(var u=0;u<d.length;u++){var v=d[u][n],w=this.calculateLabelWidth(v)>h?h:this.calculateLabelWidth(v),x=d[u][p],y=f-x*m;if(i=s-w/2,t&&this.drawLabel(i,j,v,"middle"),u>0){var z=this._dataPoints[o][u-1];this.animated?this.drawLinesAfterTime(z,{x:s,y:y},2,r,1e3*u/c):this.drawLines(z.x,z.y,[{x:s,y:y}],2,r)}this.animated?this.drawCircleAfterTime(s,y,b,q,r,1e3*u/c):this.drawCircle(s,y,b,q,r),this._dataPoints[o].push({x:s,y:y}),s+=h}t=!1}if(this.showTooltip){var A=this,B=this.canvas.getBoundingClientRect(),C=this.getTooltip(),D=C.getContext("2d"),E=this.getTooltipDefaultHeight()+4,F=this.getMaxLabelWidth(this.getMax(),g,this.getTooltipFont());this.canvas.onmousemove=function(c){var e=c.clientX-B.left,f=c.clientY-B.top,h=!1;if(A.mouseIn(e,f,a.x,a.y-l,k,l))for(var i=0;i<A._dataPoints.length;i++)for(var j=0;j<A._dataPoints[i].length;j++){var m=A._dataPoints[i][j];A.mouseInCircle(e,f,m.x,m.y,b)&&(C.height=E,C.width=F+A.getDefaultPadding(),C.style.left=e+"px",C.style.top=f-E+"px",A.customizeTooltip(D,d[j],[g[i]],C.width,C.height),h=!0)}h||A.hideTooltip()}}},e.mouseInCircle=function(b,c,d,e,f){return a.Utils.mouseInCircle(b,c,d,e,f)},e.drawLinesAfterTime=function(a,b,c,d,e){var f=this;setTimeout(function(){f.drawLines(a.x,a.y,[b],2,d)},e)},e.drawCircleAfterTime=function(a,b,c,d,e,f){var g=this;setTimeout(function(){g.drawCircle(a,b,c,d,e)},f)},e.clearCircle=function(a,b,c){var d=this.context;d.beginPath(),d.arc(a,b,c,0,2*Math.PI,!1),d.clip(),d.clearRect(a-c-1,b-c-1,2*c+2,2*c+2)},e.drawCircle=function(a,b,c,d,e){var f=this.context;f.beginPath(),f.arc(a,b,c,0,2*Math.PI,!1),f.fillStyle=d,d&&f.fill(),f.lineWidth=1,f.strokeStyle=e,f.stroke()},e.getLineInterval=function(b){return a.Utils.calculateXAxisItemWidth(b.length-1,0,this.getXAxisLength()-this.getPaddingRight())},a.LineChart=d}(window.zChart);